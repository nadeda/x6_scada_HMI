"use strict";(self.webpackChunkXScadas=self.webpackChunkXScadas||[]).push([[480],{9480:function(e,t,n){n.r(t),n.d(t,{FakeData:function(){return T}});var l=n(4041),a=n(9650),r=n(7049),o=n(6759),i=n(2530),u=n(2787),c=n(1531),d=n(1804),m=n(359),p=n(9101),v=function(e,t,n){if(n||2===arguments.length)for(var l,a=0,r=t.length;a<r;a++)!l&&a in t||(l||(l=Array.prototype.slice.call(t,0,a)),l[a]=t[a]);return e.concat(l||Array.prototype.slice.call(t))},s=l.Z.Option,g=["none","even","mark","odd","space"],E=["110","300","600","1200"],f=["input-register","holding-register","discrete-input","coil","read-device-identification"],Z=[5,6,7,8],T=function(e){var t,n,T,h,y,C,I,k,P,S,w,R,b,B,D,F,A=null===(t=e.cell)||void 0===t?void 0:t.toJSON(),U=m.useState((null===(n=A.config)||void 0===n?void 0:n.connectionTypeTemplate)||"tcp"),O=U[0],j=U[1],x=m.useState(E),V=x[0],G=x[1],L=m.useState(""),X=L[0],H=L[1],J=m.useState((null===(T=A.config)||void 0===T?void 0:T.baudRateTemplate)||""),K=J[0],N=J[1],W=m.useState((null===(h=A.config)||void 0===h?void 0:h.pathTemplate)||""),q=W[0],z=W[1],M=m.useState((null===(y=A.config)||void 0===y?void 0:y.parityTemplate)||g[1]),Q=M[0],Y=M[1],$=m.useState((null===(C=A.config)||void 0===C?void 0:C.dataBitsTemplate)||Z[0]),_=$[0],ee=$[1],te=m.useState((null===(I=A.config)||void 0===I?void 0:I.stopBitsTemplate)||1),ne=te[0],le=te[1],ae=m.useState((null===(k=A.config)||void 0===k?void 0:k.unitIdTemplate)||""),re=ae[0],oe=ae[1],ie=m.useState((null===(P=A.config)||void 0===P?void 0:P.areUnsignedInts)||!1),ue=ie[0],ce=ie[1],de=m.useState((null===(S=A.config)||void 0===S?void 0:S.timeoutTemplate)||""),me=de[0],pe=de[1],ve=m.useState((null===(w=A.config)||void 0===w?void 0:w.endiannessTemplate)||""),se=ve[0],ge=ve[1],Ee=m.useState((null===(R=A.config)||void 0===R?void 0:R.hostTemplate)||""),fe=Ee[0],Ze=Ee[1],Te=m.useState((null===(b=A.config)||void 0===b?void 0:b.portTemplate)||""),he=Te[0],ye=Te[1],Ce=m.useState((null===(B=A.config)||void 0===B?void 0:B.readInstructionsType)||"array"),Ie=Ce[0],ke=Ce[1],Pe=m.useState(null===(D=A.config)||void 0===D?void 0:D.readInstructions),Se=Pe[0],we=Pe[1],Re=m.useState((null===(F=A.config)||void 0===F?void 0:F.destinationPath)||""),be=Re[0],Be=Re[1];m.useEffect((function(){var e,t,n,l,a,r,o,i,u,c,d,m,p,s,E,f,T,h,y,C,I;j((null===(e=A.config)||void 0===e?void 0:e.connectionTypeTemplate)||"tcp"),V.includes((null===(t=A.config)||void 0===t?void 0:t.baudRateTemplate)+"")||G(v(v([],V,!0),[null===(l=null===(n=A.config)||void 0===n?void 0:n.baudRateTemplate)||void 0===l?void 0:l.toString()],!1)),z(null===(a=A.config)||void 0===a?void 0:a.pathTemplate),N(null===(r=A.config)||void 0===r?void 0:r.baudRateTemplate),Y((null===(o=A.config)||void 0===o?void 0:o.parityTemplate)||g[1]),ee((null===(i=A.config)||void 0===i?void 0:i.dataBitsTemplate)||Z[0]),le((null===(u=A.config)||void 0===u?void 0:u.stopBitsTemplate)||1),oe(null===(c=A.config)||void 0===c?void 0:c.unitIdTemplate),ce((null===(d=A.config)||void 0===d?void 0:d.areUnsignedInts)||!1),ge(null===(m=A.config)||void 0===m?void 0:m.endiannessTemplate),Ze(null===(p=A.config)||void 0===p?void 0:p.hostTemplate),ye(null===(s=A.config)||void 0===s?void 0:s.portTemplate),pe(null===(E=A.config)||void 0===E?void 0:E.timeoutTemplate),ke((null===(f=A.config)||void 0===f?void 0:f.readInstructionsType)||"array"),"array"===(null===(T=A.config)||void 0===T?void 0:T.readInstructionsType)?we(v(v([],null===(h=A.config)||void 0===h?void 0:h.readInstructions,!0),[{addressTemplate:"",key:"",lengthTemplate:"",typeTemplate:"input-register"}],!1)):"payload"===(null===(y=A.config)||void 0===y?void 0:y.readInstructionsType)&&we((null===(C=A.config)||void 0===C?void 0:C.readInstructions)||""),Be(null===(I=A.config)||void 0===I?void 0:I.destinationPath)}),[e.cellId]),m.useEffect((function(){var t;null===(t=e.cell)||void 0===t||t.prop("config",{connectionTypeTemplate:O,pathTemplate:q,timeoutTemplate:me,baudRateTemplate:K,parityTemplate:Q,dataBitsTemplate:_,stopBitsTemplate:ne,unitIdTemplate:re,areUnsignedInts:ue,endiannessTemplate:se,hostTemplate:fe,portTemplate:he,readInstructionsType:Ie,destinationPath:be,readInstructions:"payloadPath"===Ie?Se:Se.filter((function(e){return""!==e.key}))})}),[e.cellId,O,q,me,K,Q,_,ne,re,ue,se,fe,he,Ie,be,Se]);var De=function(e){e.preventDefault(),G(v(v([],V,!0),[X],!1)),H("")},Fe=function(e,t,n){if("payloadPath"!==Ie||"payload"!==t){var l=v([],Se,!0);l[n][t]=e,n===l.length-1&&""!==l[n].key&&(l[n+1]={addressTemplate:"",key:"",lengthTemplate:"",typeTemplate:"input-register"}),we(v([],l,!0))}else we(e)};return m.createElement(a.Z,{direction:"vertical"},m.createElement(r.Z,{plain:!0},"Address Config"),m.createElement(o.Z,null,m.createElement(i.ZP.Group,{value:O,onChange:function(e){return j(e.target.value)}},m.createElement(a.Z,{direction:"vertical"},m.createElement(i.ZP,{value:"tcp"},"TCP Connection"),m.createElement(i.ZP,{value:"serial"},"Serial RTU Connection")))),"serial"===O?m.createElement(m.Fragment,null,m.createElement(o.Z,null,"Path Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g./dev/ROBOT or {{data.serial}}",value:q,onChange:function(e){return z(e.target.value)}})),m.createElement(o.Z,null,"Baud Rate Template"),m.createElement(o.Z,null,m.createElement(l.Z,{style:{width:200},placeholder:"custom dropdown render",value:K,onChange:function(e){N(e)},dropdownRender:function(e){return m.createElement(m.Fragment,null,e,m.createElement(r.Z,{style:{margin:"8px 0"}}),m.createElement(a.Z,{align:"center",style:{padding:"0 8px 4px"}},m.createElement(u.Z,{placeholder:"Please enter item",value:X}),m.createElement(c.Z.Link,{onClick:De,style:{whiteSpace:"nowrap"}},m.createElement(p.Z,null)," Add item")))}},V.map((function(e){return m.createElement(s,{key:e},e)})))),m.createElement(o.Z,null,"Parity Template"),m.createElement(o.Z,null,m.createElement(l.Z,{defaultValue:g[1],value:Q,onChange:function(e){return Y(e)},style:{width:"100%"}},g.map((function(e){return m.createElement(s,{key:e},e)})))),m.createElement(o.Z,null,"Data Bits Template"),m.createElement(o.Z,null,m.createElement(l.Z,{defaultValue:Z[0],value:_,onChange:function(e){return ee(e)},style:{width:"100%"}},Z.map((function(e){return m.createElement(s,{key:e},e)})))),m.createElement(o.Z,null,"Stop Bits Template"),m.createElement(o.Z,null,m.createElement(l.Z,{defaultValue:1,value:ne,onChange:function(e){return le(+e)},style:{width:"100%"}},m.createElement(s,{key:1},"1"),m.createElement(s,{key:2},"2"))),m.createElement(o.Z,null,"Unit ID Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.{{data.unitId}}",value:re,onChange:function(e){return oe(e.target.value)}})),m.createElement(o.Z,null,m.createElement(i.ZP.Group,{value:ue,onChange:function(e){return ce(e.target.value)}},m.createElement(a.Z,{direction:"vertical"},m.createElement(i.ZP,{value:!1},"Convert the results into signed integers"),m.createElement(i.ZP,{value:!0},"Convert the results into unsigned integers")))),m.createElement(o.Z,null,"Timeout Template (in milliseconds)"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.{{data.timeout}} or 3000000",value:me,onChange:function(e){return pe(e.target.value)}})),m.createElement(o.Z,null,"Endianness Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.big or {{working.endianness}}",value:se,onChange:function(e){return ge(e.target.value)}}))):m.createElement(m.Fragment,null,m.createElement(o.Z,null,"Host Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.{{data.host}} or 192.168.0.9",value:fe,onChange:function(e){return Ze(e.target.value)}})),m.createElement(o.Z,null,"Port Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.{{data.port}} or 502",value:he,onChange:function(e){return ye(e.target.value)}})),m.createElement(o.Z,null,"Unit ID Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.{{data.unitId}}",value:re,onChange:function(e){return oe(e.target.value)}})),m.createElement(o.Z,null,"Timeout Template (in milliseconds)"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.{{data.timeout}} or 3000000",value:me,onChange:function(e){return pe(e.target.value)}}))),m.createElement(r.Z,{plain:!0},"Write Instructions"),m.createElement(o.Z,null,m.createElement(i.ZP.Group,{value:Ie,onChange:function(e){return t=e.target.value,ke(t),void("array"===t?we([{addressTemplate:"",key:"",lengthTemplate:"",typeTemplate:"input-register"}]):"payloadPath"===t&&we(""));var t}},m.createElement(a.Z,{direction:"vertical"},m.createElement(i.ZP,{value:"array"},"Array of Template Strings"),m.createElement(i.ZP,{value:"payloadPath"},"Payload Path")))),"array"===Ie?m.createElement(m.Fragment,null,Se.map((function(e,t){return m.createElement(d.Z,{style:{width:220}},m.createElement(o.Z,null,"Register Type"),m.createElement(o.Z,null,m.createElement(l.Z,{defaultValue:f[0],value:null==e?void 0:e.typeTemplate,onChange:function(e){return Fe(e,"typeTemplate",t)},style:{width:"100%"}},f.map((function(e){return m.createElement(s,{key:e},e)})))),"read-device-identification"===(null==e?void 0:e.typeTemplate)?m.createElement(m.Fragment,null,m.createElement(o.Z,null,"Device ID Code Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.1 or {{working.deviceIdCode}}",value:null==e?void 0:e.deviceIdCodeTemplate,onChange:function(e){return Fe(e.target.value,"deviceIdCodeTemplate",t)}})),m.createElement(o.Z,null,"Objext ID Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.0 or {{working.objectId}}",value:null==e?void 0:e.objectIdTemplate,onChange:function(e){return Fe(e.target.value,"objectIdTemplate",t)}}))):m.createElement(m.Fragment,null,m.createElement(o.Z,null,"Address Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.0 or {{working.address}}",value:null==e?void 0:e.addressTemplate,onChange:function(e){return Fe(e.target.value,"addressTemplate",t)}})),m.createElement(o.Z,null,"Length Template"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.1 or {{working.length}}",value:null==e?void 0:e.lengthTemplate,onChange:function(e){return Fe(e.target.value,"lengthTemplate",t)}}))),m.createElement(o.Z,null,"Result Key"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"请保证key值的唯一性",value:null==e?void 0:e.key,onChange:function(e){return Fe(e.target.value,"key",t)}})),m.createElement(r.Z,{plain:!0}))}))):m.createElement(m.Fragment,null,m.createElement(o.Z,null,"Path to Read Instruction"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.data.myInstruction",value:Se,onChange:function(e){return Fe(e.target.value,"payload")}}))),m.createElement(r.Z,{plain:!0},"Result"),m.createElement(o.Z,null,"Result Path"),m.createElement(o.Z,null,m.createElement(u.Z,{placeholder:"e.g.result.modbusData",value:be,onChange:function(e){return Be(e.target.value)}})))}}}]);